# SemesterFlow - Cursor AI Rules

You are working on SemesterFlow, a study tracker with AI features.

## Critical Rules
1. Use context hooks: useCourses(), useAssignments(), useSessions(), useStats(), useAuth()
2. Never call Supabase directly - use services/supabaseDB.ts functions
3. Import types from types.ts - never redefine Course, Assignment, etc.
4. No `any` type - TypeScript strict mode enforced
5. Handle all errors with try-catch and user feedback (alert)
6. Neo-brutalist design: border-2 border-black shadow-[4px_4px_0px_0px_#000]
7. Check auth: const { user } = useAuth(); if (!user) return <LoginPage />;

## Database
- Supabase PostgreSQL with RLS (Row Level Security)
- Tables: courses, assignments, sessions, user_stats, course_knowledge
- snake_case in DB, camelCase in TypeScript

## Component Pattern
```typescript
import { Course } from '../types';
import { useCourses } from '../hooks/useCourses';
import { useAuth } from '../contexts/AuthContext';

export const MyComponent: React.FC<Props> = ({ title }) => {
  const { courses, addCourse } = useCourses();
  const { user } = useAuth();

  if (!user) return <LoginPage />;

  const handleSubmit = async () => {
    try {
      await addCourse(newCourse);
      alert('Success!');
    } catch (error) {
      console.error('Failed:', error);
      alert('Failed to save. Please try again.');
    }
  };

  return <div className="retro-card p-6">...</div>;
};
```

## Key Files
- types.ts - All TypeScript interfaces
- services/supabaseDB.ts - CRUD operations
- contexts/*Context.tsx - Global state
- hooks/use*.ts - Data access

## Documentation
Full docs in /docs/README.md (read when implementing new architecture, DB tables, or deployment)
